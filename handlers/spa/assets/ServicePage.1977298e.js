import{d as _,b as s}from"./QPage.ed5eed8f.js";import{r as n,f as q,P as r,S as B,T as y,U as t,X as f,af as i,b1 as d,an as P,_ as V}from"./index.23f69f92.js";import{Q as N}from"./QForm.f67e9060.js";import{api as p}from"./axios.200258fa.js";import{u as h}from"./use-quasar.8f85687a.js";const Q={class:"row q-gutter-md"},k={key:0},C={key:0,class:"row q-gutter-md"},T={key:1,class:"row q-gutter-md"},D={class:"row q-gutter-md"},E={__name:"ServicePage",setup(I){const u=h(),m=n([]),c=n([]),v=n([]),b=["TCP","UDP"],g=["NodePort","LoadBalancer","ClusterIP"],e=n({name:null,namespace:null,labels:{app:null},containerPort:null,servicePort:null,protocol:"TCP",selector:{app:null},type:"LoadBalancer"});function w(){p.get("/api/v1/get-namespaces").then(o=>{c.value=o.data.data})}function x(){p.get(`/api/v1/deploy/${e.value.namespace}`).then(o=>{m.value=o.data.data.map(l=>l.name),v.value=o.data.data}).catch(o=>{u.notify({color:"error",position:"top-right",message:o.message,icon:"report_problem"})})}function S(){e.value={}}function U(){const o=v.value.find(l=>l.name===e.value.name);e.value.labels=o.labels,e.value.selector=o.labels,e.value.containerPort=parseInt(e.value.containerPort,10),e.value.servicePort=parseInt(e.value.servicePort,10),p.post("/api/v1/svc/",e.value).then(l=>{u.notify({color:l.data.status,position:"top-right",message:l.data.msg+": "+l.data.data.metadata.name,icon:"done"})}).catch(l=>{u.notify({color:"error",position:"top-right",message:l.message,icon:"report_problem"})})}return q(w),(o,l)=>(r(),B(_,{class:"flex flex-center"},{default:y(()=>[t(N,{modelValue:e.value,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value=a),onSubmit:U,onReset:S,class:"q-gutter-md"},{default:y(()=>[f("div",Q,[t(s,{modelValue:e.value.namespace,"onUpdate:modelValue":[l[0]||(l[0]=a=>e.value.namespace=a),x],options:c.value,label:"Select Namespace",filled:"",style:{width:"180px"}},null,8,["modelValue","options"]),e.value.namespace?(r(),i("div",k,[t(s,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.name=a),options:m.value,label:"Select Deployment",filled:"",style:{width:"180px"}},null,8,["modelValue","options"])])):d("",!0)]),e.value.name?(r(),i("div",C,[t(P,{filled:"",type:"number",modelValue:e.value.containerPort,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.containerPort=a),label:"Container Port *","lazy-rules":"",style:{width:"180px"}},null,8,["modelValue"]),t(P,{filled:"",type:"number",modelValue:e.value.servicePort,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.servicePort=a),label:"Service Port *","lazy-rules":"",style:{width:"180px"}},null,8,["modelValue"])])):d("",!0),e.value.containerPort&&e.value.servicePort?(r(),i("div",T,[t(s,{options:b,modelValue:e.value.protocol,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.protocol=a),label:"Service Protocol",filled:"",style:{width:"180px"}},null,8,["modelValue"]),t(s,{options:g,modelValue:e.value.type,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.type=a),label:"Service Type",filled:"",style:{width:"180px"}},null,8,["modelValue"])])):d("",!0),f("div",D,[t(V,{label:"Submit",type:"submit",color:"primary",class:"q-pr-md"}),t(V,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1},8,["modelValue"])]),_:1}))}};export{E as default};
