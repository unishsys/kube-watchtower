import{d as _,b as s}from"./QPage.ed5eed8f.js";import{r as n,f as q,P as r,S as B,T as y,U as o,X as f,af as i,b1 as p,an as V,_ as b}from"./index.23f69f92.js";import{Q as N}from"./QForm.f67e9060.js";import{api as d}from"./axios.200258fa.js";import{u as h}from"./use-quasar.8f85687a.js";const Q={class:"row q-gutter-md"},k={key:0},C={key:0,class:"row q-gutter-md"},T={key:1,class:"row q-gutter-md"},D={class:"row q-gutter-md"},E={__name:"DepTest",setup(I){const u=h(),m=n([]),c=n([]),v=n([]),P=["TCP","UDP"],g=["NodePort","LoadBalancer","ClusterIP"],e=n({name:null,namespace:null,labels:{app:null},containerPort:null,servicePort:null,protocol:"TCP",selector:{app:null},type:"LoadBalancer"});function w(){d.get("/api/v1/get-namespaces").then(t=>{c.value=t.data.data})}function x(){d.get(`/api/v1/deploy/${e.value.namespace}`).then(t=>{m.value=t.data.data.map(l=>l.name),v.value=t.data.data}).catch(t=>{u.notify({color:"error",position:"top-right",message:t.message,icon:"report_problem"})})}function S(){e.value={}}function U(){const t=v.value.find(l=>l.name===e.value.name);e.value.labels=t.labels,e.value.selector=t.labels,e.value.containerPort=parseInt(e.value.containerPort,10),e.value.servicePort=parseInt(e.value.servicePort,10),d.post("/api/v1/svc/",e.value).then(l=>{u.notify({color:l.data.status,position:"top-right",message:l.data.msg+": "+l.data.data.metadata.name,icon:"done"})}).catch(l=>{u.notify({color:"error",position:"top-right",message:l.message,icon:"report_problem"})})}return q(w),(t,l)=>(r(),B(_,{class:"flex flex-center"},{default:y(()=>[o(N,{modelValue:e.value,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value=a),onSubmit:U,onReset:S,class:"q-gutter-md"},{default:y(()=>[f("div",Q,[o(s,{modelValue:e.value.namespace,"onUpdate:modelValue":[l[0]||(l[0]=a=>e.value.namespace=a),x],options:c.value,label:"Select Namespace",filled:"",style:{width:"180px"}},null,8,["modelValue","options"]),e.value.namespace?(r(),i("div",k,[o(s,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.name=a),options:m.value,label:"Select Deployment",filled:"",style:{width:"180px"}},null,8,["modelValue","options"])])):p("",!0)]),e.value.name?(r(),i("div",C,[o(V,{filled:"",type:"number",modelValue:e.value.containerPort,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.containerPort=a),label:"Container Port *","lazy-rules":"",style:{width:"180px"}},null,8,["modelValue"]),o(V,{filled:"",type:"number",modelValue:e.value.servicePort,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.servicePort=a),label:"Service Port *","lazy-rules":"",style:{width:"180px"}},null,8,["modelValue"])])):p("",!0),e.value.containerPort&&e.value.servicePort?(r(),i("div",T,[o(s,{options:P,modelValue:e.value.protocol,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.protocol=a),label:"Service Protocol",filled:"",style:{width:"180px"}},null,8,["modelValue"]),o(s,{options:g,modelValue:e.value.type,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.type=a),label:"Service Type",filled:"",style:{width:"180px"}},null,8,["modelValue"])])):p("",!0),f("div",D,[o(b,{label:"Submit",type:"submit",color:"primary",class:"q-pr-md"}),o(b,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1},8,["modelValue"])]),_:1}))}};export{E as default};
