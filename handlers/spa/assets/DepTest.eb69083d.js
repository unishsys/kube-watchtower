import{Q as h,a as Q}from"./QPage.22c61efd.js";import{a as x,b as s,c as C,Q as N}from"./QTable.8d62474e.js";import{r as d,f as U,P as R,S as T,T as o,X as g,U as t,ac as p,W as n,a5 as i,a9 as B,aa as S,a8 as _,ab as w}from"./index.93f69a73.js";import{api as m}from"./axios.fbcd50c1.js";import{u as A}from"./use-quasar.b4ea623b.js";const K={class:"col"},D={__name:"DepTest",setup(P){const u=A(),f=d([]),r=d(null),v=d([]);function b(){m.get("/api/v1/get-namespaces").then(l=>{v.value=l.data.data})}function k(){r.value&&m.get(`/api/v1/deploy/${r.value}`).then(l=>{f.value=l.data.data}).catch(l=>{u.notify({color:"error",position:"top-right",message:l.message,icon:"report_problem"})})}function V(l){console.log("row: ",l);const c=parseInt(l.replicas,10);m.post("/api/v1/deploy/",{namespace:r.value,name:l.name,replicas:c}).then(e=>{let a=e.data;u.notify({color:a.status,position:"top-right",message:a.msg+" -> "+l.replicas,icon:"done"})}).catch(e=>{console.log(e),u.notify({color:"error",position:"top-right",message:e.message,icon:"report_problem"})})}return U(b),(l,c)=>(R(),T(h,{class:"flex flex-center"},{default:o(()=>[g("div",null,[g("div",K,[t(Q,{modelValue:r.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>r.value=e),k],options:v.value,label:"Select Namespace"},null,8,["modelValue","options"])]),t(N,{flat:"",bordered:"",title:"Deploy",rows:f.value,columns:l.columns,"row-key":"name","binary-state-sort":""},{body:o(e=>[t(x,{props:e,class:p(e.row.status=="success"?"bg-dark text-white":"bg-error text-black")},{default:o(()=>[t(s,{key:"name",props:e},{default:o(()=>[n(i(e.row.name),1)]),_:2},1032,["props"]),t(s,{key:"replicas",props:e},{default:o(()=>[n(i(e.row.replicas)+" ",1),t(C,{modelValue:e.row.replicas,"onUpdate:modelValue":a=>e.row.replicas=a,title:"Update Replica"},{default:o(a=>[t(B,{modelValue:a.value,"onUpdate:modelValue":y=>a.value=y,dense:"",autofocus:"",onKeyup:S(a.set,["enter"]),hint:"Replica Count"},{after:o(()=>[t(_,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:w(a.cancel,["stop","prevent"])},null,8,["onClick"]),t(_,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:[w(a.set,["stop","prevent"]),y=>V(e.row)],disable:a.validate(a.value)===!1||a.initialValue===a.value},null,8,["onClick","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),t(s,{key:"availableReplicas",props:e},{default:o(()=>[n(i(e.row.availableReplicas),1)]),_:2},1032,["props"]),t(s,{key:"readyReplicas",props:e},{default:o(()=>[n(i(e.row.readyReplicas),1)]),_:2},1032,["props"]),t(s,{key:"status",props:e,class:p(e.row.status)},{default:o(()=>[n(i(e.row.status),1)]),_:2},1032,["props","class"]),t(s,{key:"createdAt",props:e,class:p(e.row.createdAt)},{default:o(()=>[n(i(e.row.createdAt),1)]),_:2},1032,["props","class"])]),_:2},1032,["props","class"])]),_:1},8,["rows","columns"])])]),_:1}))}};export{D as default};
